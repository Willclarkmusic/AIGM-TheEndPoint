import React from "react";
import { FiX } from "react-icons/fi";

interface EmojiPickerProps {
  onEmojiSelect: (emoji: string) => void;
  onClose: () => void;
  anchorRef?: React.RefObject<HTMLElement>;
}

const EmojiPicker: React.FC<EmojiPickerProps> = ({ onEmojiSelect, onClose, anchorRef }) => {
  // Popular emojis organized by category
  const emojiCategories = [
    {
      name: "Smileys",
      emojis: ["ðŸ˜€", "ðŸ˜ƒ", "ðŸ˜„", "ðŸ˜", "ðŸ˜…", "ðŸ˜‚", "ðŸ¤£", "ðŸ˜Š", "ðŸ˜‡", "ðŸ™‚", "ðŸ˜‰", "ðŸ˜Œ", "ðŸ˜", "ðŸ¥°", "ðŸ˜˜", "ðŸ˜—", "ðŸ˜™", "ðŸ˜š", "ðŸ˜‹", "ðŸ˜›", "ðŸ˜œ", "ðŸ¤ª", "ðŸ˜", "ðŸ¤‘", "ðŸ¤—", "ðŸ¤­", "ðŸ¤«", "ðŸ¤”", "ðŸ¤", "ðŸ¤¨", "ðŸ˜", "ðŸ˜‘", "ðŸ˜¶", "ðŸ˜", "ðŸ˜’", "ðŸ™„", "ðŸ˜¬", "ðŸ¤¥", "ðŸ˜”", "ðŸ˜ª", "ðŸ˜´", "ðŸ˜·", "ðŸ¤’", "ðŸ¤•", "ðŸ¤¢", "ðŸ¤®", "ðŸ¥µ", "ðŸ¥¶", "ðŸ˜µ", "ðŸ¤¯", "ðŸ˜Ž", "ðŸ¥³", "ðŸ˜•", "ðŸ˜Ÿ", "ðŸ™", "â˜¹ï¸", "ðŸ˜®", "ðŸ˜¯", "ðŸ˜²", "ðŸ˜³", "ðŸ¥º", "ðŸ˜¦", "ðŸ˜§", "ðŸ˜¨", "ðŸ˜°", "ðŸ˜¥", "ðŸ˜¢", "ðŸ˜­", "ðŸ˜±", "ðŸ˜–", "ðŸ˜£", "ðŸ˜ž", "ðŸ˜“", "ðŸ˜©", "ðŸ˜«", "ðŸ¥±", "ðŸ˜¤", "ðŸ˜¡", "ðŸ˜ ", "ðŸ¤¬", "ðŸ˜ˆ", "ðŸ‘¿", "ðŸ’€", "â˜ ï¸", "ðŸ’©", "ðŸ¤¡", "ðŸ‘¹", "ðŸ‘º", "ðŸ‘»", "ðŸ‘½", "ðŸ‘¾", "ðŸ¤–"]
    },
    {
      name: "Gestures",
      emojis: ["ðŸ‘‹", "ðŸ¤š", "ðŸ–ï¸", "âœ‹", "ðŸ––", "ðŸ‘Œ", "ðŸ¤Œ", "ðŸ¤", "âœŒï¸", "ðŸ¤ž", "ðŸ¤Ÿ", "ðŸ¤˜", "ðŸ¤™", "ðŸ‘ˆ", "ðŸ‘‰", "ðŸ‘†", "ðŸ–•", "ðŸ‘‡", "â˜ï¸", "ðŸ‘", "ðŸ‘Ž", "ðŸ‘Š", "âœŠ", "ðŸ¤›", "ðŸ¤œ", "ðŸ‘", "ðŸ™Œ", "ðŸ‘", "ðŸ¤²", "ðŸ¤", "ðŸ™", "ðŸ’ª", "ðŸ¦¾", "ðŸ¦¿", "ðŸ¦µ", "ðŸ¦¶", "ðŸ‘‚", "ðŸ¦»", "ðŸ‘ƒ", "ðŸ§ ", "ðŸ«€", "ðŸ«", "ðŸ¦·", "ðŸ¦´", "ðŸ‘€", "ðŸ‘ï¸", "ðŸ‘…", "ðŸ‘„", "ðŸ’‹"]
    },
    {
      name: "Hearts",
      emojis: ["â¤ï¸", "ðŸ§¡", "ðŸ’›", "ðŸ’š", "ðŸ’™", "ðŸ’œ", "ðŸ–¤", "ðŸ¤", "ðŸ¤Ž", "ðŸ’”", "â£ï¸", "ðŸ’•", "ðŸ’ž", "ðŸ’“", "ðŸ’—", "ðŸ’–", "ðŸ’˜", "ðŸ’", "ðŸ’Ÿ", "â˜®ï¸", "âœï¸", "â˜ªï¸", "ðŸ•‰ï¸", "â˜¸ï¸", "âœ¡ï¸", "ðŸ”¯", "ðŸ•Ž", "â˜¯ï¸", "â˜¦ï¸", "ðŸ›", "â›Ž", "â™ˆ", "â™‰", "â™Š", "â™‹", "â™Œ", "â™", "â™Ž", "â™", "â™", "â™‘", "â™’", "â™“", "ðŸ†”", "âš›ï¸"]
    },
    {
      name: "Animals",
      emojis: ["ðŸ¶", "ðŸ±", "ðŸ­", "ðŸ¹", "ðŸ°", "ðŸ¦Š", "ðŸ»", "ðŸ¼", "ðŸ»â€â„ï¸", "ðŸ¨", "ðŸ¯", "ðŸ¦", "ðŸ®", "ðŸ·", "ðŸ½", "ðŸ¸", "ðŸµ", "ðŸ™ˆ", "ðŸ™‰", "ðŸ™Š", "ðŸ’", "ðŸ”", "ðŸ§", "ðŸ¦", "ðŸ¤", "ðŸ£", "ðŸ¥", "ðŸ¦†", "ðŸ¦…", "ðŸ¦‰", "ðŸ¦‡", "ðŸº", "ðŸ—", "ðŸ´", "ðŸ¦„", "ðŸ", "ðŸª±", "ðŸ›", "ðŸ¦‹", "ðŸŒ", "ðŸž", "ðŸœ", "ðŸª°", "ðŸª²", "ðŸª³", "ðŸ¦Ÿ", "ðŸ¦—", "ðŸ•·ï¸", "ðŸ•¸ï¸", "ðŸ¦‚", "ðŸ¢", "ðŸ", "ðŸ¦Ž", "ðŸ¦–", "ðŸ¦•", "ðŸ™", "ðŸ¦‘", "ðŸ¦", "ðŸ¦ž", "ðŸ¦€", "ðŸ¡", "ðŸ ", "ðŸŸ", "ðŸ¬", "ðŸ³", "ðŸ‹", "ðŸ¦ˆ", "ðŸŠ", "ðŸ…", "ðŸ†", "ðŸ¦“", "ðŸ¦", "ðŸ¦§", "ðŸ¦£", "ðŸ˜", "ðŸ¦›", "ðŸ¦", "ðŸª", "ðŸ«", "ðŸ¦’", "ðŸ¦˜", "ðŸ¦¬", "ðŸƒ", "ðŸ‚", "ðŸ„", "ðŸŽ", "ðŸ–", "ðŸ", "ðŸ‘", "ðŸ¦™", "ðŸ", "ðŸ¦Œ", "ðŸ•", "ðŸ©", "ðŸ¦®", "ðŸ•â€ðŸ¦º", "ðŸˆ", "ðŸˆâ€â¬›", "ðŸª¶", "ðŸ“", "ðŸ¦ƒ", "ðŸ¦¤", "ðŸ¦š", "ðŸ¦œ", "ðŸ¦¢", "ðŸ¦©", "ðŸ•Šï¸", "ðŸ‡", "ðŸ¦", "ðŸ¦¨", "ðŸ¦¡", "ðŸ¦«", "ðŸ¦¦", "ðŸ¦¥", "ðŸ", "ðŸ€", "ðŸ¿ï¸", "ðŸ¦”"]
    },
    {
      name: "Food",
      emojis: ["ðŸ", "ðŸŽ", "ðŸ", "ðŸŠ", "ðŸ‹", "ðŸŒ", "ðŸ‰", "ðŸ‡", "ðŸ“", "ðŸ«", "ðŸˆ", "ðŸ’", "ðŸ‘", "ðŸ¥­", "ðŸ", "ðŸ¥¥", "ðŸ¥", "ðŸ…", "ðŸ†", "ðŸ¥‘", "ðŸ¥¦", "ðŸ¥¬", "ðŸ¥’", "ðŸŒ¶ï¸", "ðŸ«‘", "ðŸŒ½", "ðŸ¥•", "ðŸ«’", "ðŸ§„", "ðŸ§…", "ðŸ¥”", "ðŸ ", "ðŸ¥", "ðŸ¥¯", "ðŸž", "ðŸ¥–", "ðŸ¥¨", "ðŸ§€", "ðŸ¥š", "ðŸ³", "ðŸ§ˆ", "ðŸ¥ž", "ðŸ§‡", "ðŸ¥“", "ðŸ¥©", "ðŸ—", "ðŸ–", "ðŸ¦´", "ðŸŒ­", "ðŸ”", "ðŸŸ", "ðŸ•", "ðŸ«“", "ðŸ¥ª", "ðŸ¥™", "ðŸ§†", "ðŸŒ®", "ðŸŒ¯", "ðŸ«”", "ðŸ¥—", "ðŸ¥˜", "ðŸ«•", "ðŸ¥«", "ðŸ", "ðŸœ", "ðŸ²", "ðŸ›", "ðŸ£", "ðŸ±", "ðŸ¥Ÿ", "ðŸ¦ª", "ðŸ¤", "ðŸ™", "ðŸš", "ðŸ˜", "ðŸ¥", "ðŸ¥ ", "ðŸ¥®", "ðŸ¢", "ðŸ¡", "ðŸ§", "ðŸ¨", "ðŸ¦", "ðŸ¥§", "ðŸ§", "ðŸ°", "ðŸŽ‚", "ðŸ®", "ðŸ­", "ðŸ¬", "ðŸ«", "ðŸ¿", "ðŸ©", "ðŸª", "ðŸŒ°", "ðŸ¥œ", "ðŸ¯", "ðŸ¥›", "ðŸ¼", "ðŸ«–", "â˜•", "ðŸµ", "ðŸ§ƒ", "ðŸ¥¤", "ðŸ§‹", "ðŸ¶", "ðŸº", "ðŸ»", "ðŸ¥‚", "ðŸ·", "ðŸ¥ƒ", "ðŸ¸", "ðŸ¹", "ðŸ§‰", "ðŸ¾", "ðŸ§Š", "ðŸ¥„", "ðŸ´", "ðŸ½ï¸", "ðŸ¥£", "ðŸ¥¡", "ðŸ¥¢", "ðŸ§‚"]
    },
    {
      name: "Objects",
      emojis: ["âš½", "ðŸ€", "ðŸˆ", "âš¾", "ðŸ¥Ž", "ðŸŽ¾", "ðŸ", "ðŸ‰", "ðŸ¥", "ðŸŽ±", "ðŸª€", "ðŸ“", "ðŸ¸", "ðŸ’", "ðŸ‘", "ðŸ¥", "ðŸ", "ðŸªƒ", "ðŸ¥…", "â›³", "ðŸª", "ðŸ¹", "ðŸŽ£", "ðŸ¤¿", "ðŸ¥Š", "ðŸ¥‹", "ðŸŽ½", "ðŸ›¹", "ðŸ›¼", "ðŸ›·", "â›¸ï¸", "ðŸ¥Œ", "ðŸŽ¿", "â›·ï¸", "ðŸ‚", "ðŸª‚", "ðŸ‹ï¸", "ðŸ¤¼", "ðŸ¤¸", "ðŸ¤º", "â›¹ï¸", "ðŸ‡", "ðŸŠ", "ðŸš´", "ðŸšµ", "ðŸŽ­", "ðŸŽ¨", "ðŸŽ¬", "ðŸŽ¤", "ðŸŽ§", "ðŸŽ¼", "ðŸŽ¹", "ðŸ¥", "ðŸª˜", "ðŸŽ·", "ðŸŽº", "ðŸª—", "ðŸŽ¸", "ðŸª•", "ðŸŽ»", "ðŸŽ²", "â™Ÿï¸", "ðŸŽ¯", "ðŸŽ³", "ðŸŽ®", "ðŸŽ°", "ðŸ§©"]
    },
    {
      name: "Symbols",
      emojis: ["âœ¨", "â­", "ðŸŒŸ", "ðŸ’«", "ðŸŒ ", "ðŸ”¥", "ðŸ’¥", "ðŸ’¢", "ðŸ’¦", "ðŸ’§", "ðŸ’¤", "ðŸ’¨", "â˜€ï¸", "ðŸŒž", "ðŸŒ", "ðŸŒ›", "ðŸŒœ", "ðŸŒš", "ðŸŒ•", "ðŸŒ–", "ðŸŒ—", "ðŸŒ˜", "ðŸŒ‘", "ðŸŒ’", "ðŸŒ“", "ðŸŒ”", "ðŸŒ™", "ðŸŒŽ", "ðŸŒ", "ðŸŒ", "ðŸª", "âš¡", "â˜„ï¸", "ðŸŒªï¸", "ðŸŒˆ", "â˜ï¸", "ðŸŒ¤ï¸", "â›…", "ðŸŒ¥ï¸", "â˜ï¸", "ðŸŒ¦ï¸", "ðŸŒ§ï¸", "â›ˆï¸", "ðŸŒ©ï¸", "ðŸŒ¨ï¸", "â„ï¸", "â˜ƒï¸", "â›„", "ðŸŒ¬ï¸", "ðŸ’¨", "ðŸ’§", "ðŸ’¦", "â˜”", "â˜‚ï¸", "ðŸŒŠ", "ðŸŒ«ï¸"]
    },
    {
      name: "Flags",
      emojis: ["ðŸ", "ðŸš©", "ðŸŽŒ", "ðŸ´", "ðŸ³ï¸", "ðŸ³ï¸â€ðŸŒˆ", "ðŸ³ï¸â€âš§ï¸", "ðŸ´â€â˜ ï¸", "ðŸ‡¦ðŸ‡«", "ðŸ‡¦ðŸ‡±", "ðŸ‡©ðŸ‡¿", "ðŸ‡¦ðŸ‡¸", "ðŸ‡¦ðŸ‡©", "ðŸ‡¦ðŸ‡´", "ðŸ‡¦ðŸ‡®", "ðŸ‡¦ðŸ‡¶", "ðŸ‡¦ðŸ‡¬", "ðŸ‡¦ðŸ‡·", "ðŸ‡¦ðŸ‡²", "ðŸ‡¦ðŸ‡¼", "ðŸ‡¦ðŸ‡º", "ðŸ‡¦ðŸ‡¹", "ðŸ‡¦ðŸ‡¿", "ðŸ‡§ðŸ‡¸", "ðŸ‡§ðŸ‡­", "ðŸ‡§ðŸ‡©", "ðŸ‡§ðŸ‡§", "ðŸ‡§ðŸ‡¾", "ðŸ‡§ðŸ‡ª", "ðŸ‡§ðŸ‡¿", "ðŸ‡§ðŸ‡¯", "ðŸ‡§ðŸ‡²", "ðŸ‡§ðŸ‡¹", "ðŸ‡§ðŸ‡´", "ðŸ‡§ðŸ‡¦", "ðŸ‡§ðŸ‡¼", "ðŸ‡§ðŸ‡·", "ðŸ‡®ðŸ‡´", "ðŸ‡»ðŸ‡¬", "ðŸ‡§ðŸ‡³", "ðŸ‡§ðŸ‡¬", "ðŸ‡§ðŸ‡«", "ðŸ‡§ðŸ‡®", "ðŸ‡°ðŸ‡­", "ðŸ‡¨ðŸ‡²", "ðŸ‡¨ðŸ‡¦", "ðŸ‡®ðŸ‡¨", "ðŸ‡¨ðŸ‡»", "ðŸ‡§ðŸ‡¶", "ðŸ‡°ðŸ‡¾", "ðŸ‡¨ðŸ‡«", "ðŸ‡¹ðŸ‡©", "ðŸ‡¨ðŸ‡±", "ðŸ‡¨ðŸ‡³", "ðŸ‡¨ðŸ‡½", "ðŸ‡¨ðŸ‡¨", "ðŸ‡¨ðŸ‡´", "ðŸ‡°ðŸ‡²", "ðŸ‡¨ðŸ‡¬", "ðŸ‡¨ðŸ‡©", "ðŸ‡¨ðŸ‡°", "ðŸ‡¨ðŸ‡·", "ðŸ‡¨ðŸ‡®", "ðŸ‡­ðŸ‡·", "ðŸ‡¨ðŸ‡º", "ðŸ‡¨ðŸ‡¼", "ðŸ‡¨ðŸ‡¾", "ðŸ‡¨ðŸ‡¿", "ðŸ‡©ðŸ‡°", "ðŸ‡©ðŸ‡¯", "ðŸ‡©ðŸ‡²", "ðŸ‡©ðŸ‡´", "ðŸ‡ªðŸ‡¨", "ðŸ‡ªðŸ‡¬", "ðŸ‡¸ðŸ‡»", "ðŸ‡¬ðŸ‡¶", "ðŸ‡ªðŸ‡·", "ðŸ‡ªðŸ‡ª", "ðŸ‡ªðŸ‡¹", "ðŸ‡ªðŸ‡º", "ðŸ‡«ðŸ‡°", "ðŸ‡«ðŸ‡´", "ðŸ‡«ðŸ‡¯", "ðŸ‡«ðŸ‡®", "ðŸ‡«ðŸ‡·", "ðŸ‡¬ðŸ‡«", "ðŸ‡µðŸ‡«", "ðŸ‡¹ðŸ‡«", "ðŸ‡¬ðŸ‡¦", "ðŸ‡¬ðŸ‡²", "ðŸ‡¬ðŸ‡ª", "ðŸ‡©ðŸ‡ª", "ðŸ‡¬ðŸ‡­", "ðŸ‡¬ðŸ‡®", "ðŸ‡¬ðŸ‡·", "ðŸ‡¬ðŸ‡±", "ðŸ‡¬ðŸ‡©", "ðŸ‡¬ðŸ‡µ", "ðŸ‡¬ðŸ‡º", "ðŸ‡¬ðŸ‡¹", "ðŸ‡¬ðŸ‡¬", "ðŸ‡¬ðŸ‡³", "ðŸ‡¬ðŸ‡¼", "ðŸ‡¬ðŸ‡¾", "ðŸ‡­ðŸ‡¹", "ðŸ‡­ðŸ‡³", "ðŸ‡­ðŸ‡°", "ðŸ‡­ðŸ‡º", "ðŸ‡®ðŸ‡¸", "ðŸ‡®ðŸ‡³", "ðŸ‡®ðŸ‡©", "ðŸ‡®ðŸ‡·", "ðŸ‡®ðŸ‡¶", "ðŸ‡®ðŸ‡ª", "ðŸ‡®ðŸ‡²", "ðŸ‡®ðŸ‡±", "ðŸ‡®ðŸ‡¹", "ðŸ‡¯ðŸ‡²", "ðŸ‡¯ðŸ‡µ", "ðŸŽŒ", "ðŸ‡¯ðŸ‡ª", "ðŸ‡¯ðŸ‡´", "ðŸ‡°ðŸ‡¿", "ðŸ‡°ðŸ‡ª", "ðŸ‡°ðŸ‡®", "ðŸ‡½ðŸ‡°", "ðŸ‡°ðŸ‡¼", "ðŸ‡°ðŸ‡¬", "ðŸ‡±ðŸ‡¦", "ðŸ‡±ðŸ‡»", "ðŸ‡±ðŸ‡§", "ðŸ‡±ðŸ‡¸", "ðŸ‡±ðŸ‡·", "ðŸ‡±ðŸ‡¾", "ðŸ‡±ðŸ‡®", "ðŸ‡±ðŸ‡¹", "ðŸ‡±ðŸ‡º", "ðŸ‡²ðŸ‡´", "ðŸ‡²ðŸ‡°", "ðŸ‡²ðŸ‡¬", "ðŸ‡²ðŸ‡¼", "ðŸ‡²ðŸ‡¾", "ðŸ‡²ðŸ‡»", "ðŸ‡²ðŸ‡±", "ðŸ‡²ðŸ‡¹", "ðŸ‡²ðŸ‡­", "ðŸ‡²ðŸ‡¶", "ðŸ‡²ðŸ‡·", "ðŸ‡²ðŸ‡º", "ðŸ‡¾ðŸ‡¹", "ðŸ‡²ðŸ‡½", "ðŸ‡«ðŸ‡²", "ðŸ‡²ðŸ‡©", "ðŸ‡²ðŸ‡¨", "ðŸ‡²ðŸ‡³", "ðŸ‡²ðŸ‡ª", "ðŸ‡²ðŸ‡¸", "ðŸ‡²ðŸ‡¦", "ðŸ‡²ðŸ‡¿", "ðŸ‡²ðŸ‡²", "ðŸ‡³ðŸ‡¦", "ðŸ‡³ðŸ‡·", "ðŸ‡³ðŸ‡µ", "ðŸ‡³ðŸ‡±", "ðŸ‡³ðŸ‡¨", "ðŸ‡³ðŸ‡¿", "ðŸ‡³ðŸ‡®", "ðŸ‡³ðŸ‡ª", "ðŸ‡³ðŸ‡¬", "ðŸ‡³ðŸ‡º", "ðŸ‡³ðŸ‡«", "ðŸ‡°ðŸ‡µ", "ðŸ‡²ðŸ‡µ", "ðŸ‡³ðŸ‡´", "ðŸ‡´ðŸ‡²", "ðŸ‡µðŸ‡°", "ðŸ‡µðŸ‡¼", "ðŸ‡µðŸ‡¸", "ðŸ‡µðŸ‡¦", "ðŸ‡µðŸ‡¬", "ðŸ‡µðŸ‡¾", "ðŸ‡µðŸ‡ª", "ðŸ‡µðŸ‡­", "ðŸ‡µðŸ‡³", "ðŸ‡µðŸ‡±", "ðŸ‡µðŸ‡¹", "ðŸ‡µðŸ‡·", "ðŸ‡¶ðŸ‡¦", "ðŸ‡·ðŸ‡ª", "ðŸ‡·ðŸ‡´", "ðŸ‡·ðŸ‡º", "ðŸ‡·ðŸ‡¼", "ðŸ‡¼ðŸ‡¸", "ðŸ‡¸ðŸ‡²", "ðŸ‡¸ðŸ‡¦", "ðŸ‡¸ðŸ‡³", "ðŸ‡·ðŸ‡¸", "ðŸ‡¸ðŸ‡¨", "ðŸ‡¸ðŸ‡±", "ðŸ‡¸ðŸ‡¬", "ðŸ‡¸ðŸ‡½", "ðŸ‡¸ðŸ‡°", "ðŸ‡¸ðŸ‡®", "ðŸ‡¬ðŸ‡¸", "ðŸ‡¸ðŸ‡§", "ðŸ‡¸ðŸ‡´", "ðŸ‡¿ðŸ‡¦", "ðŸ‡°ðŸ‡·", "ðŸ‡¸ðŸ‡¸", "ðŸ‡ªðŸ‡¸", "ðŸ‡±ðŸ‡°", "ðŸ‡§ðŸ‡±", "ðŸ‡¸ðŸ‡­", "ðŸ‡°ðŸ‡³", "ðŸ‡±ðŸ‡¨", "ðŸ‡µðŸ‡²", "ðŸ‡»ðŸ‡¨", "ðŸ‡¸ðŸ‡©", "ðŸ‡¸ðŸ‡·", "ðŸ‡¸ðŸ‡¿", "ðŸ‡¸ðŸ‡ª", "ðŸ‡¨ðŸ‡­", "ðŸ‡¸ðŸ‡¾", "ðŸ‡¹ðŸ‡¼", "ðŸ‡¹ðŸ‡¯", "ðŸ‡¹ðŸ‡¿", "ðŸ‡¹ðŸ‡­", "ðŸ‡¹ðŸ‡±", "ðŸ‡¹ðŸ‡¬", "ðŸ‡¹ðŸ‡°", "ðŸ‡¹ðŸ‡´", "ðŸ‡¹ðŸ‡¹", "ðŸ‡¹ðŸ‡³", "ðŸ‡¹ðŸ‡·", "ðŸ‡¹ðŸ‡²", "ðŸ‡¹ðŸ‡¨", "ðŸ‡¹ðŸ‡»", "ðŸ‡»ðŸ‡®", "ðŸ‡ºðŸ‡¬", "ðŸ‡ºðŸ‡¦", "ðŸ‡¦ðŸ‡ª", "ðŸ‡¬ðŸ‡§", "ðŸ´ó§ó¢ó¥ó®ó§ó¿", "ðŸ´ó§ó¢ó³ó£ó´ó¿", "ðŸ´ó§ó¢ó·ó¬ó³ó¿", "ðŸ‡ºðŸ‡³", "ðŸ‡ºðŸ‡¸", "ðŸ‡ºðŸ‡¾", "ðŸ‡ºðŸ‡¿", "ðŸ‡»ðŸ‡º", "ðŸ‡»ðŸ‡¦", "ðŸ‡»ðŸ‡ª", "ðŸ‡»ðŸ‡³", "ðŸ‡¼ðŸ‡«", "ðŸ‡ªðŸ‡­", "ðŸ‡¾ðŸ‡ª", "ðŸ‡¿ðŸ‡²", "ðŸ‡¿ðŸ‡¼"]
    }
  ];

  // Calculate picker position based on anchor
  const getPickerPosition = () => {
    if (!anchorRef?.current) return {};
    
    const rect = anchorRef.current.getBoundingClientRect();
    const pickerHeight = 400;
    const pickerWidth = 320;
    
    // Check if there's enough space above the anchor
    const spaceAbove = rect.top;
    const spaceBelow = window.innerHeight - rect.bottom;
    
    let top = 0;
    let bottom = "auto";
    
    if (spaceAbove > pickerHeight || spaceAbove > spaceBelow) {
      // Show above
      bottom = window.innerHeight - rect.top + 8;
      top = "auto";
    } else {
      // Show below
      top = rect.bottom + 8;
    }
    
    // Center horizontally relative to anchor
    let left = rect.left + (rect.width / 2) - (pickerWidth / 2);
    
    // Keep within viewport bounds
    if (left < 8) left = 8;
    if (left + pickerWidth > window.innerWidth - 8) {
      left = window.innerWidth - pickerWidth - 8;
    }
    
    return {
      position: "fixed" as const,
      top: top === "auto" ? undefined : `${top}px`,
      bottom: bottom === "auto" ? undefined : `${bottom}px`,
      left: `${left}px`,
      width: `${pickerWidth}px`,
      maxHeight: `${pickerHeight}px`,
      zIndex: 50,
    };
  };

  return (
    <>
      {/* Backdrop */}
      <div 
        className="fixed inset-0 z-40"
        onClick={onClose}
      />
      
      {/* Emoji Picker */}
      <div 
        className="bg-white dark:bg-gray-800 border-4 border-black dark:border-gray-600 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] dark:shadow-[8px_8px_0px_0px_rgba(55,65,81,1)] overflow-hidden flex flex-col"
        style={getPickerPosition()}
      >
        {/* Header */}
        <div className="bg-blue-400 dark:bg-blue-500 px-4 py-3 border-b-4 border-black dark:border-gray-600 flex items-center justify-between">
          <h3 className="text-lg font-black uppercase text-black dark:text-white">
            Choose Emoji
          </h3>
          <button
            onClick={onClose}
            className="w-8 h-8 bg-red-500 dark:bg-red-600 border-2 border-black dark:border-gray-600 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] dark:shadow-[2px_2px_0px_0px_rgba(55,65,81,1)] hover:shadow-none hover:translate-x-0.5 hover:translate-y-0.5 transition-all flex items-center justify-center"
            title="Close"
          >
            <FiX size={16} className="text-white" />
          </button>
        </div>
        
        {/* Emoji Grid */}
        <div className="overflow-y-auto flex-1 p-4">
          {emojiCategories.map((category) => (
            <div key={category.name} className="mb-6">
              <h4 className="text-sm font-black uppercase text-gray-700 dark:text-gray-300 mb-2">
                {category.name}
              </h4>
              <div className="grid grid-cols-8 gap-1">
                {category.emojis.map((emoji) => (
                  <button
                    key={emoji}
                    onClick={() => onEmojiSelect(emoji)}
                    className="w-9 h-9 flex items-center justify-center text-2xl hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-transparent hover:border-black dark:hover:border-gray-600 hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] dark:hover:shadow-[2px_2px_0px_0px_rgba(55,65,81,1)] transition-all"
                    title={emoji}
                  >
                    {emoji}
                  </button>
                ))}
              </div>
            </div>
          ))}
        </div>
      </div>
    </>
  );
};

export default EmojiPicker;